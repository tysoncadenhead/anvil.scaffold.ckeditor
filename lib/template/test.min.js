module.exports=function(e){"use strict";var t,i=(require("../src/server"),require("../build.json")),o=require("underscore"),n=require("chai");return e.functional&&(t=require("webdriverjs").remote({logLevel:"silent",desiredCapabilities:{browserName:"phantomjs"}})),global=o.extend(global,{webclient:require("webdriverjs"),client:t,expect:n.expect}),o.extend(n,{file:e.file,before:function(o){this.timeout(5e5),e.functional?t.init().url("http://localhost:"+i.port+"/"+this.file,o):o()},after:function(i){e.functional&&t.end(),i()}})};